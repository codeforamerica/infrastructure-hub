<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>ATL Infrastructure Hub</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="styles.css" type="text/css">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
 		<script src='https://api.tiles.mapbox.com/mapbox.js/v1.6.2/mapbox.js'></script>
		<link href='https://api.tiles.mapbox.com/mapbox.js/v1.6.2/mapbox.css' rel='stylesheet' />
		<link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    </head>
    
    <body>
        <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

        <!-- Content -->
    	<div id="map"></div>

        <!-- Title Bar -->
		<section class="menu" id="title-menu"> 
		    <div class="company-title"><img id="logo" src="images/logo.png" alt="logo" width="120px"></div>
		    <h3 class="subtitle">A real-time snapshot of people, projects, and logistics in Atlanta</h3>
		</section>
		

		<!-- About this project -->
		<script>
		$(document).ready(function(){
		  $("#hide-about").click(function(){
			$("#about").slideUp();
			$("#hide-about").hide();
			$("#show-about").show();
		  });
		  $("#show-about").click(function(){
		    $("#about").slideDown();
			$("#show-about").hide();
			$("#hide-about").show();
		  });
		});
		</script>

		<section class="menu" id="about-menu">
		    <div class="hide-show">
		    	<a href="#" class="hide" id="hide-about">Hide Info</a>
		    	<a href="#" class="show" id="show-about">Show Info</a>
		    </div>
		    <div id="about">Data for this project is provided by the City of Atlanta, and comes from the following sources:
		    	<ol>
		    		<li>Atlanta GIS Data Catalogue</li>
		    		<li>City of Atlanta 311</li>
		    		<li>City of Atlanta Department of Public Works</li>
		    </div>
		</section>


		<!-- Legend -->
		<script>
		$(document).ready(function(){
		  $("#hide-legend").click(function(){
			$("#legend").slideUp();
			$("#hide-legend").hide();
			$("#show-legend").show();
		  });
		  $("#show-legend").click(function(){
		    $("#legend").slideDown(300);
			$("#show-legend").hide();
			$("#hide-legend").show();
		  });
		});
		</script>

		<section class="menu" id="legend-menu">
		    <div class="hide-show">
		    	<a href="#" class="hide" id="hide-legend">Hide Legend</a>
		    	<a href="#" class="show" id="show-legend">Show Legend</a>
		    </div>
		    <div id="legend">Data for this project is provided by the City of Atlanta, and comes from the following sources:
		    	<ol>
		    		<li>Atlanta GIS Data Catalogue</li>
		    		<li>City of Atlanta 311</li>
		    		<li>City of Atlanta Department of Public Works</li>
		    </div>		</section>


		<!-- Footer -->
    	<section class="footer">
		    <div class="navbar">
		    	<ul>
		    		<li><a href="http://www.codeforamerica.org"><img src="images/CfA_logo_reverse_lg.png" height="30px" alt="Code for America"></a></li>
		    		<li><a href="about.html">About</a></li>
		    		<li><a href="news.html">News</a></li>
		    		<li><a href="mailto:atlanta@codeforamerica.org">Contact</a></li>
		    	</ul>
		    </div>
		</section>


        <!-- Leaflet script -->
		<script type="text/javascript" src="data/bridges_Fulton.js"></script>
		<script type="text/javascript">

			var map = L.mapbox.map('map', 'reveillette.hmen7ek6')
	    		.setView([33.75, -84.39], 14);


			// // control that shows state info on hover
			// var info = L.control();

			// info.onAdd = function (map) {
			// 	this._div = L.DomUtil.create('div', 'info');
			// 	this.update();
			// 	return this._div;
			// };

			// info.update = function (props) {
			// 	this._div.innerHTML = '<h4>US Population Density</h4>' +  (props ?
			// 		'<b>' + props.name + '</b><br />' + props.density + ' people / mi<sup>2</sup>'
			// 		: 'Hover over a state');
			// };

			// info.addTo(map);


			function style(feature) {
				return {
					weight: 2,
					opacity: 1,
					color: '#fd2f00',
					dashArray: '3',
					fillOpacity: 0.7,
				};
			}

			function highlightFeature(e) {
				var layer = e.target;

				layer.setStyle({
					weight: 5,
					color: '#666',
					dashArray: '',
					fillOpacity: 0.7
				});

				if (!L.Browser.ie && !L.Browser.opera) {
					layer.bringToFront();
				}

				info.update(layer.feature.properties);
			}

			var geojson;

			function resetHighlight(e) {
				geojson.resetStyle(e.target);
				info.update();
			}

			function zoomToFeature(e) {
				map.fitBounds(e.target.getBounds());
			}

			function onEachFeature(feature, layer) {
				layer.on({
					mouseover: highlightFeature,
					mouseout: resetHighlight,
					click: zoomToFeature
				});
			}

			geojson = L.geoJson(bridgelines, {
				style: style,
				onEachFeature: onEachFeature
			}).addTo(map);

			map.attributionControl.addAttribution('Population data &copy; <a href="http://census.gov/">US Census Bureau</a>');


			var legend = L.control({position: 'bottomright'});

			legend.onAdd = function (map) {

				var div = L.DomUtil.create('div', 'info legend'),
					grades = [0, 10, 20, 50, 100, 200, 500, 1000],
					labels = [],
					from, to;

				for (var i = 0; i < grades.length; i++) {
					from = grades[i];
					to = grades[i + 1];

					labels.push(
						'<i style="background:' + getColor(from + 1) + '"></i> ' +
						from + (to ? '&ndash;' + to : '+'));
				}

				div.innerHTML = labels.join('<br>');
				return div;
			};

			legend.addTo(map);

		</script>

	    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.10.2.min.js"><\/script>')</script>

        <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
        <script>
            (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
            function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
            e=o.createElement(i);r=o.getElementsByTagName(i)[0];
            e.src='//www.google-analytics.com/analytics.js';
            r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
            ga('create','UA-XXXXX-X');ga('send','pageview');
        </script>
    </body>
</html>
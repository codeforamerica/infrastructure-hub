<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="css/styles.css" rel="stylesheet">

 		<!-- JQuery -->
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>

		<!-- D3 -->
		<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>    	

		<!-- Mapbox CSS + js -->
        <script src='https://api.tiles.mapbox.com/mapbox.js/v1.6.2/mapbox.js'></script>
		<link href='https://api.tiles.mapbox.com/mapbox.js/v1.6.2/mapbox.css' rel='stylesheet' />

		<!-- MarkerCluster plugin -->
		<link rel="stylesheet" href="css/MarkerCluster.css" />
		<link rel="stylesheet" href="css/MarkerCluster.Default.css" />
		<script src="js/leaflet.markercluster-src.js"></script>

		<!-- Google Fonts -->
		<link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700,900,200italic,300italic,400italic,600italic,700italic,900italic|Lato:100,300,400,700,900,100italic,300italic,400italic,700italic,900italic|Quicksand:300,400,700|Raleway:400,100,200,300,500,600,700,800,900|Roboto+Slab:400,100,300,700' rel='stylesheet' type='text/css'>

        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

        <!-- Site Content -->

     	<button type="button" class="step-button prev"><</button>
     	<button type="button" class="step-button next">></button>

        <div class="container">

            <!-- Step 1: introduction -->
			<div class="active" id="intro">
				<h2>Step 1</h2>
				<h1>Atlanta's 2014 Infrastructure Bond Measure</h1>
				<p>The City of Atlanta is planning a $250 million infrastructure bond measure, and is currently seeking input from citizens. This site was designed with citizens in mind, and will be instrumental in helping the city decide which projects get funded. You can use this site to:</p>
				<div class="row">
			        <div class="brick" id="learn">
			          <a href="testmap.html">
			            <img class="brick-badge" src="assets/map.svg">
			            <h3>1. Learn</h3>
			            <p>Learn more about the infrastructure bond and the kinds of projects the city is proposing.</p>
			          </a>
			        </div>

			        <div class="brick" id="vote">
			          <a href="#">
			            <img class="brick-badge" src="assets/vote.svg">
			            <h3>2. Comment</h3>
			            <p>Provide feedback on what kinds of improvements you would like to see to Atlanta's roads, sidewalks, bike paths, etc.</p>
			          </a>
			        </div>

			        <div class="brick" id="learn">
			          <a href="testmap.html">
			            <img class="brick-badge" src="assets/map.svg">
			            <h3>3. Browse</h3>
			            <p>Explore the projects proposed for your neighborhood on our interactive map.</p>
			          </a>
			        </div>
			    </div>
				<div class="row">		   
			        <div class="brick" id="vote">
			          <a href="#">
			            <img class="brick-badge" src="assets/vote.svg">
			            <h3>4. Vote</h3>
			            <p>Vote for the projects that are important to you.</p>
			          </a>
			        </div>

			        <div class="brick" id="involve">
			          <a href="#">
			            <img class="brick-badge" src="assets/question.svg">
			            <h3>5. Sign up</h3>
			            <p>Sign up for notifications about your favorite projects and the bond measure in general.</p>
			          </a>
			        </div>

			        <div class="brick" id="involve">
			          <a href="#">
			            <img class="brick-badge" src="assets/question.svg">
			            <h3>6. Get more involved</h3>
			            <p>Find out more about the project timeline and locate a public information session near you.</p>
			          </a>
			        </div>
			      </div>
			</div>

            <!-- Step 2: About -->
			<div class="step" id="what-is-infrastructure">
				<h2>Step 2</h2>
				<h1>What is this infrastructure bond about?</h1>
				<p>This bond measure is aimed, first and foremost, at high-priority repairs to streets and bridges that have a significant impact on public safety. In addition, a certain amount of funding will also be set aside to develop streetscape and active transportation improvements such as sidewalks and bicycle paths. You can help decide where this money goes by providing your input on this site!</p>
				<div class="row">
					<div class="brick"><h3>Budget for public safety improvements:</h3><h1>$XX Million</h1></div>
					<div class="brick"><h3>Budget for streetscape improvements:</h3><h1>$XX Million</h1></div>
					<div class="brick"><img width="150px" height="150px" src="assets/piechart.svg"></div>
				</div>	
				<p>This bond limits its focus to infrastructure related to general fund government operations such as roads, streets, bridges and sidewalks. The Cityâ€™s water/sewer infrastructure (including storm water management) and the infrastructure at Hartsfield-Jackson Atlanta International Airport, which receive funding through independent enterprise funds, are not included.</p>

				<div class="row"></div>				
				<h1>What is an infrastructure project?</h1>
				<p>Wikipedia defines infrastructure as "the basic physical and organizational structures needed for the operation of a society or enterprise, or the services and facilities necessary for an economy to function. It can be generally defined as the set of interconnected structural elements that provide framework supporting an entire structure of development. It is an important term for judging a country or region's development."</p>
				<p>In the case of this bond measure, an infrastructure project can mean anything from a bridge repair to road resurfacing to the addition of new sidewalks and bike paths. Take a look at the <a href="#">map</a> to learn more about the specific projects, and for even more information, you can view the City's <a href="https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&uact=8&ved=0CDAQFjAB&url=http%3A%2F%2Fwww.atlantaga.gov%2Fmodules%2Fshowdocument.aspx%3Fdocumentid%3D13145&ei=0tJrU5KxBojQsASdjoGoBw&usg=AFQjCNE593aVtWagWBTgNxyG_pL7DRAuoA&bvm=bv.66111022,d.cWc">FY2010</a> and <a href="https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&cad=rja&uact=8&ved=0CDYQFjAC&url=http%3A%2F%2Fwww.atlantaga.gov%2Fmodules%2Fshowdocument.aspx%3Fdocumentid%3D12370&ei=49JrU87oG-7NsQSojIGICQ&usg=AFQjCNE75xfAi6ljduloLLap6F1GlQBVeA&bvm=bv.66111022,d.cWc">FY2013</a> infrastructure reports.</p>  

				<div class="row"></div>				
				<h1>How does this impact me?</h1>
				<p>(placeholder text) If you live, work, walk, bike or drive in Atlanta, this project will impact you. Most importantly, this is an opportunity for your voice to be heard! If you've ever thought to yourself that you'd like to see your streets get better, this is your chance to have a real impact on your community.</p>
			</div>

            <!-- Step 3: Map -->
			<div class="step" id="browse-the-projects">
				<h2>Step 3</h2>
				<h1>Browse the infrastructure projects proposed by Atlanta's <a href="http://www.atlantaga.gov/index.aspx?page=193">Department of Public Works</a></h1>
				<p>The projects on the map below have been designated by the City of Atlanta Department of Public Works as being the most critical infrastructure projects to address with this infrastructure bond. Using the layer control below, you can browse for projects in your neighborhood or council district, or look at different types of projects proposed citywide.</p>
				<div class="row">
					<div id="map"></div>
					<a href="map.html"><p>View full screen<p></a>
				</div>	
			</div>

            <!-- Step 4: Vote -->
			<div class="step" id="vote-for-improvements">
				<h2>Step 4</h2>
				<h1>What kinds of improvements would you like to see in your neighborhood?</a></h1>
				<p>First, read about the different types of improvements below. Then when you're ready, rank them in order of your preference and click submit.</p>
				<div class="row">
					<div class="brick" id="bike-paths">
						<img class="brick-badge" src="assets/vote.svg">
			        	<h3>Bicycle paths</h3>
			        	<p>Vote for the projects that are important to you.</p>
			        	<select>
  							<option value="1">1</option>
  							<option value="2">2</option>
  							<option value="3">3</option>
  							<option value="4">4</option>
  							<option value="5">5</option>
  							<option value="6">6</option>
  							<option value="7">7</option>
  							<option value="8">8</option>
  							<option value="9">9</option>
						</select>
			        		<p>Comment:</p>
			        		<textarea rows="4" cols="30"></textarea>
					</div>

					<div class="brick" id="bike-paths">
						<img class="brick-badge" src="assets/vote.svg">
			        	<h3>Sidewalks</h3>
			        	<p>Vote for the projects that are important to you.</p>
			        	<select>
  							<option value="1">1</option>
  							<option value="2">2</option>
  							<option value="3">3</option>
  							<option value="4">4</option>
  							<option value="5">5</option>
  							<option value="6">6</option>
  							<option value="7">7</option>
  							<option value="8">8</option>
  							<option value="9">9</option>
						</select>
			        		<p>Comment:</p>
			        		<textarea rows="4" cols="30"></textarea>
					</div>

					<div class="brick" id="bike-paths">
						<img class="brick-badge" src="assets/vote.svg">
			        	<h3>Speed humps</h3>
			        	<p>Vote for the projects that are important to you.</p>
			        	<select>
  							<option value="1">1</option>
  							<option value="2">2</option>
  							<option value="3">3</option>
  							<option value="4">4</option>
  							<option value="5">5</option>
  							<option value="6">6</option>
  							<option value="7">7</option>
  							<option value="8">8</option>
  							<option value="9">9</option>
						</select>
			        		<p>Comment:</p>
			        		<textarea rows="4" cols="30"></textarea>			        	
					</div>
				</div>

				<div class="row">
					<div class="brick" id="bike-paths">
						<img class="brick-badge" src="assets/vote.svg">
			        	<h3>Street trees</h3>
			        	<p>Vote for the projects that are important to you.</p>
			        	<select>
  							<option value="1">1</option>
  							<option value="2">2</option>
  							<option value="3">3</option>
  							<option value="4">4</option>
  							<option value="5">5</option>
  							<option value="6">6</option>
  							<option value="7">7</option>
  							<option value="8">8</option>
  							<option value="9">9</option>
						</select>
			        		<p>Comment:</p>
			        		<textarea rows="4" cols="30"></textarea>			        	
					</div>

					<div class="brick" id="bike-paths">
						<img class="brick-badge" src="assets/vote.svg">
			        	<h3>Curbs</h3>
			        	<p>Vote for the projects that are important to you.</p>
			        	<select>
  							<option value="1">1</option>
  							<option value="2">2</option>
  							<option value="3">3</option>
  							<option value="4">4</option>
  							<option value="5">5</option>
  							<option value="6">6</option>
  							<option value="7">7</option>
  							<option value="8">8</option>
  							<option value="9">9</option>
						</select>
			        		<p>Comment:</p>
			        		<textarea rows="4" cols="30"></textarea>			        	
					</div>

					<div class="brick" id="bike-paths">
						<img class="brick-badge" src="assets/vote.svg">
			        	<h3>Traffic signals and stop signs</h3>
			        	<p>Vote for the projects that are important to you.</p>
			        	<select>
  							<option value="1">1</option>
  							<option value="2">2</option>
  							<option value="3">3</option>
  							<option value="4">4</option>
  							<option value="5">5</option>
  							<option value="6">6</option>
  							<option value="7">7</option>
  							<option value="8">8</option>
  							<option value="9">9</option>
						</select>
			        		<p>Comment:</p>
			        		<textarea rows="4" cols="30"></textarea>			        	
					</div>
				</div>

				<div class="row">
					<div class="brick" id="bike-paths">
						<img class="brick-badge" src="assets/vote.svg">
			        	<h3>Medians</h3>
			        	<p>Vote for the projects that are important to you.</p>
			        	<select>
  							<option value="1">1</option>
  							<option value="2">2</option>
  							<option value="3">3</option>
  							<option value="4">4</option>
  							<option value="5">5</option>
  							<option value="6">6</option>
  							<option value="7">7</option>
  							<option value="8">8</option>
  							<option value="9">9</option>
						</select>
			        		<p>Comment:</p>
			        		<textarea rows="4" cols="30"></textarea>			        	
					</div>

					<div class="brick" id="bike-paths">
						<img class="brick-badge" src="assets/vote.svg">
			        	<h3>On-street parking</h3>
			        	<p>Vote for the projects that are important to you.</p>
			        	<select>
  							<option value="1">1</option>
  							<option value="2">2</option>
  							<option value="3">3</option>
  							<option value="4">4</option>
  							<option value="5">5</option>
  							<option value="6">6</option>
  							<option value="7">7</option>
  							<option value="8">8</option>
  							<option value="9">9</option>
						</select>
			        		<p>Comment:</p>
			        		<textarea rows="4" cols="30"></textarea>			        	
					</div>

					<div class="brick" id="bike-paths">
						<img class="brick-badge" src="assets/vote.svg">
			        	<h3>Turn lanes</h3>
			        	<p>Vote for the projects that are important to you.</p>
			        	<select>
  							<option value="1">1</option>
  							<option value="2">2</option>
  							<option value="3">3</option>
  							<option value="4">4</option>
  							<option value="5">5</option>
  							<option value="6">6</option>
  							<option value="7">7</option>
  							<option value="8">8</option>
  							<option value="9">9</option>
						</select>
			        		<p>Comment:</p>
			        		<textarea rows="4" cols="30"></textarea>			        	
					</div>
				</div>
				<div class="row">
					<form name="vote" action="#" method="get">
					<input type="submit" value="Submit your Vote!">
					</form>
				</div>	
			</div>
		
			<div class="step" id="sign-up">
				<h2>Step 5</h2>
				<h1>Sign up to receive notifications</a></h1>
				<p>If you would like to receive updates on the infrastructure bond, as well as the status of the projects you have voted for in your neighborhood, please provide your contact information below.</p>
				<div class="row">
					<form name="sign-up" action="#" method="get">
					<p>Please enter your email address so we can send you updates (no more than 1 per week):</p>
					<input type="text" value="email address">
					<p>Please select your neighborhood:</p>
					<select>
  							<option value="1">Midtown</option>
  							<option value="2">English Avenue</option>
  							<option value="3">Grant Park</option>
  							<option value="4">Downtown</option>
  							<option value="5">Sweet Auburn</option>
  							<option value="6">Bucktown</option>
						</select>	
					<input type="submit" value="Submit">
					</form>
				</div>	
			</div>

		</div><!-- end container-->

		<!-- Footer -->
    	<div id="footer" class="textcenter">
      		<p>Created by <a href="http://www.codeforamerica.org"><img class="footerLogo" src="assets/cfa_logo_reverse_lg.png"></a> in partnership with the <a href="http://www.atlantaga.gov">City of Atlanta</a><a href="http://www.atlantaga.gov"><img class="footerLogo" src="assets/atl_seal.png"></a></p>
    	</div>
     
		<script>
		// functions for "next" button
		var bgColors = [ "#edcd34", "#ed4097", "#29a1e5", "#3fe5a6", "#9d5fe5", "#edcd34" ]
		var i = 0
		$( ".next" ).click(function() {
		  $(".active").hide("slow");
  		  $("div.active").next("div").show("slow").toggleClass("active");
  		  $(".active").prev("div").toggleClass("active");
  		  i++;
		  $("body").css( "background-color", bgColors[i] );
		  $("button.prev").show("fast");
		});

		// functions for "previous" button
		$( ".prev" ).click(function() {
		  $(".active").hide("slow");
  		  $(".active").prev("div").show("slow").toggleClass("active");
  		  $(".active").next("div").toggleClass("active");	
  		  i--;
  		  console.log(bgColors[i]);  		  
		  $("body").css( "background-color", bgColors[i] )
		});

		</script>

	    <!-- Mapbox and Leaflet scripts -->

	    <!-- Infrastructure layers -->
	    <script type="text/javascript" src="data/resurfacing.js"></script>
	    <script type="text/javascript" src="data/bridges.js"></script>
	    <script type="text/javascript" src="data/signals.js"></script>
	    <script type="text/javascript" src="data/reversible.js"></script>
	    <script type="text/javascript" src="data/school_flasher.js"></script>
	    <script type="text/javascript" src="data/unpaved.js"></script>

	    <!-- Base area layers -->
	    <script type="text/javascript" src="data/city_limits.js"></script>
	    <script type="text/javascript" src="data/quadrants.js"></script>
	    <script type="text/javascript" src="data/council_districts.js"></script>
	    <script type="text/javascript" src="data/npus.js"></script>
	    <script type="text/javascript" src="data/neighborhoods.js"></script>

	    <script>
			var map = L.mapbox.map('map', 'codeforamerica.i4ha22b7')
	    		.setView([33.75, -84.39], 14);

	    	// Style functions
	    	function getColorByPriority(p) {
			    return p == 'LOW' 	? 	'#f9db65' :
			           p == 'MEDIUM' ? 	'#fa934f' :
			           p == 'HIGH' 	? 	'#ff3535' :
			           					'#ff3535';
			}

			function sizeByZoom(zoom) {
				return 	zoom <  12 					?	0 :
						zoom >= 12 && zoom <= 13	?	2 :
						zoom >= 14 && zoom <= 16	?	5 :
						zoom >= 17 && zoom <= 18	?	7 :
														0 ;

														
			};

	    	function lineStyle(feature) {
	    		return {
	    			lineCap: "butt",
					weight: sizeByZoom(map.getZoom()),
					opacity: 1,
					color: getColorByPriority(feature.properties.PRIORITY),
	    		}
	    	};

	    	var geojsonMarkerOptions = {
			    radius: sizeByZoom(map.getZoom()),
			    color: "#fff",
			    weight: 1,
			    opacity: 1,
			    fillOpacity: 1
			};

			function latlng(coordinates) {
				return L.coordsToLatLng(coordinates, true);
			};

			function areaStyle(feature) {
				return {
	    			lineCap: "butt",
					weight: 0.5 * sizeByZoom(map.getZoom()),
					opacity: 1,
					color: "#fff",
					dashArray: "" + sizeByZoom(map.getZoom()) + "," + sizeByZoom(map.getZoom()) + "",
					fillColor: "hsl(202,82%," + (90 - Math.floor(Math.random() * 40)) + "%)",
					fillOpacity: 0.5
				}
			};



			// function areaStyle(feature) {
			// 	for (i = 0; i < feature.length; i++) {
			// 		var random = Math.floor(Math.random() * 255);
			// 		return {
			// 			weight: sizeByZoom(map.getZoom()),
			// 			opacity: 1,
			// 			color: "#fff",
			// 			fillColor: "rgb(255,255," + random + ")",
		 //    			fillOpacity: 0.5
		 //    		}
		 //    	}
			// };

	    	// Base geometry
	    	// L.geoJson(city_limits, 	{style: areaStyle}).addTo(map);
	    	// L.geoJson(quadrants, 	{style: areaStyle}).addTo(map);
	    	// L.geoJson(council, 		{style: areaStyle}).addTo(map);
	    	// L.geoJson(npu, 			{style: areaStyle}).addTo(map);
	    	L.geoJson(neighborhoods, {style: areaStyle}).addTo(map);


	    	// Infrastructure line features
	    	var resurfacing = L.geoJson(resurfacing, 	{style: lineStyle}).addTo(map);
	    	var reversible = L.geoJson(reversible, 		{style: lineStyle}).addTo(map);
	    	var unpaved = L.geoJson(unpaved, 			{style: lineStyle}).addTo(map);


	    	// Infrastructure point features
	    	var markers = new L.MarkerClusterGroup();
		
	    	var bridges = L.geoJson(bridges, 		{
	    		pointToLayer: function (feature, latlng) {
	    			geojsonMarkerOptions['fillColor'] = getColorByPriority(feature.properties.PRIORITY);
	    			return L.circleMarker(latlng, geojsonMarkerOptions);
	    		}
	    	});
	    		
	    	var signals = L.geoJson(signals, 		{
	     		pointToLayer: function (feature, latlng) {
	    			geojsonMarkerOptions['fillColor'] = getColorByPriority(feature.properties.PRIORITY);
	    			return L.circleMarker(latlng, geojsonMarkerOptions);
	    		}
	    	});

	    	var flashers = L.geoJson(flashers, 	{
	    		pointToLayer: function (feature, latlng) {
	    			geojsonMarkerOptions['fillColor'] = getColorByPriority(feature.properties.PRIORITY);
	    			return L.circleMarker(latlng, geojsonMarkerOptions);
	    		}
	    	});

	    	markers.addLayer(bridges);
	    	markers.addLayer(signals);
	    	markers.addLayer(flashers);
	    	map.addLayer(markers);

	    </script>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.10.2.min.js"><\/script>')</script>

        <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
        <script>
            (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
            function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
            e=o.createElement(i);r=o.getElementsByTagName(i)[0];
            e.src='//www.google-analytics.com/analytics.js';
            r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
            ga('create','UA-XXXXX-X');ga('send','pageview');
        </script>
    </body>
</html>